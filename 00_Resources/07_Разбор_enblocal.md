# Комплексный гайд по редактированию "enblocal.ini"

[Оригинал (англ.)](http://wiki.step-project.com/Guide:ENBlocal_INI)

Этот гайд - всеобъемлющий справочник по функциям всех параметров, находящихся в файле "enblocal.ini". Все они расположены в порядке, заданном оригинальным файлом, и имеют пояснения, которые помогут вам в индивидуальной настройке.

[Proxy](#Секция-[PROXY])

------

## Секция [PROXY]

> Эта секция позволяет расширять функции ENB при помощи дополнительных библиотек. Она даёт возможность использовать вместе с ENB такие технологии пост-процессинга как FXAA, SMAA, SweetFX и другие.

**EnableProxyLibrary** - включает/отключает использование сторонней библиотеки. Если вы не используете никакие другие пост-процессоры, этот параметр должен оставаться выключенным. Включайте его только при использовании второй библиотеки пост-процессинга, например FXAA-Injector, SMAA или SweetFX.
+ По умолчанию: false

**InitProxyFunctions** - если говорить проще, то этот параметр должен быть включен, если вы включили предыдущий. В противном случае пусть будет выключен. Этот параметр позволяет второй библиотеке принимать участие в формировании картинки. Если вы используете вторую библиотеку, то можете установить его на false только в том случае, если она не занимается рендерингом (это библиотеки-фиксы или патчи памяти).
+ По умолчанию: true

**ProxyLibrary** - указывает полное имя дополнительной библиотеки, которая будет загружена ENBSeries. Имеет смысл только при значении true параметра EnableProxyLibrary. Если эта библиотека находится не в корневой папке игры, то вы должны указать полный путь к ней, включая метку тома. Имя или полный путь не должны содержать кириллические символы. Если вторая библиотека имеет одинаковое имя с библиотекой ENB (d3d9.dll), она должна быть переименована.
+ По умолчанию: other_d3d9.dll

------

## Секция [GLOBAL]

> Эта секция влияет на общие функции ENB.

**UsePatchSpeedhackWithoutGraphics** - используется для переключения графических модификаций ENB. Должен быть включен только в том случае, если вы используете ENBoost. Если же вы используете какой-либо ENB-пресет, должен оставаться выключенным. Учтите, функции ENBoost'а будут работать только при включенном параметре SpeedHack в секции [PERFORMANCE].
+ По умолчанию: false

**UseDefferedRendering** - включает/отключает так называемый отложенный рендеринг, от которого зависят многие эффекты ENB. Это SSAO, IBL, отражения, свечение частиц и освещение неба. Может быть выключен для повышения производительности, но это скажется на красоте картинки. Если вы используете функции ENBoost'а, выключите этот параметр, т.к. он будет не нужен.
+ По умолчанию: true

**IgnoreCreationKit** - предписывает ENB игнорировать Creation Kit или нет. Этот параметр должен оставаться включенным.
+ По умолчанию: true

------

## Секция [PERFORMANCE]

> Эта секция содержит набор параметров, относящихся к производительности.

**SpeedHack** - включает/отключает определённые функции DX9, которые не нужны ENBoost'у, чтобы сократить расходы ресурсов. Рекомендуется всегда держать этот параметр включенным, т.к. он повышает производительность.
+ По умолчанию: true

**EnableOcclusionCulling** - включает/отключает функцию Occlusion Culling. Рекомендуется всегда держать этот параметр включенным, т.к. он повышает производительность.
+ По умолчанию: true

------

## Секция [MEMORY]

> ENB также имеет функции управления памятью, что может существенно уменьшить частоту крашей по причине заполнения памяти (лимит около 3.1 Гб). Эти параметры должны быть настроены в соответствии с железом и индивидуально для каждого. Правильная работа ENBoost'а во многом зависит именно от них, а неправильная настройка может привести к дополнительным проблемам в игре. При запуске игры с ENBSeries крайне желательно закрыть все ненужные программы, работающие в фоновом режиме, чтобы освободить ресурсы для работы.

**ExpandSystemMemoryX64**

> Замечено, что эта функция конфликтует с "Sheson's Memory Patch 3.0" и SKSE последних версий. Может случиться так, что стартовое выделение памяти этой функцией превысит лимиты патча памяти (см. свой файл SKSE.ini) и игра закроется. Поэтому желательно оставить этот параметр выключенным.

Когда включен, этот параметр изменяет код, связанный с выделением памяти: данные будут храниться не "снизу" выделенной для игры памяти, а "сверху". По словам Бориса Воронцова, это может уменьшить фрагментацию памяти и улучшить работу с ней, особенно на 64-разрядных системах. Чтобы эта функция работала, ReduceSystemMemoryUsage должен быть установлен на true, а EnableUnsafeMemoryHacks - на false (см. ниже).
+ По умолчанию: false

**ReduceSystemMemoryUsage** - этот параметр значительно уменьшает частоту вылетов и появления других проблем, связанных с достижением игрой лимита памяти. Это делается при помощи процесса "enbhost.exe", который управляет динамичным выделением памяти. Крайне рекомендуется оставить этот параметр включенным. Чтобы он работал, пользователь должен иметь минимум 4 Гб оперативной памяти (RAM). Может быть запущено одновременно несколько "enbhost.exe", каждый из которых будет управлять своими 4 Гб памяти - до достижения общего лимита в 128 Гб или же до значения, указанного в VideoMemorySizeMb (см. ниже). Если параметр ExpandSystemMemoryX64 включен, ReduceSystemMemoryUsage должен быть включен обязательно.
+ По умолчанию: true

**DisableDriverMemoryManager** - этот параметр был реализован как фикс для обладателей видеокарт AMD, однако, может оказаться полезным и для остальных. Он заставляет библиотеки драйверов ENBSeries взять на себя управление кэшированными текстурами (обычно этим занимаются видеодрайверы). При этом многие ошибки видеодрайверов будут игнорироваться. Когда включен, этот параметр может вызвать снижение производительности и/или более долгие паузы. Если игра часто крашится при использовании ENBoost'а, вы можете включить его и посмотреть, решится ли проблема (это помогает выявить неполадки видеодрайверов). В других случаях лучше оставить его выключенным.
+ По умолчанию: false

**DisablePreloadToVRAM** - постоянно запускать игру со включенным этим параметром не рекомендуется. Когда он включен, то может ускорить загрузку ячеек, т.к. геометрия моделей и текстуры не загружаются в видеопамять, пока видны. Это может вызвать "заикания", т.к. все данные должны динамически записываться в память во время игры (игрок постоянно осматривается и перемещается). Включение этого параметра может помочь загрузить сохранение, которое обычно не загружается. Если это сработало, следует перейти в небольшую комнату, сохраниться и отключить этот параметр перед следующей загрузкой проблемного сохранения. Если вы замечаете довольно долгие загрузки, то перед включением рекомендуется сначала использовать клавишу "Free VRAM" из секции [INPUT], чтобы освободить видеопамять перед входом в новую локацию или быстрым путешествием.
+ По умолчанию: false

**EnableUnsafeMemoryHacks** - включение этого параметра по большому счёту небезопасно. Это пробное решения для пользователей с сильными "заиканиями" (обычно такое наблюдается при видеопамяти больше 4 Гб). Когда включено, перевыделение памяти, компрессия и "enbhost.exe" не используются. Работает только когда включен ReduceSystemMemoryUsage. При использовании замечен баг: комбинация Alt+Tab не работает в полноэкранном режиме. Установите значение false, если параметр ExpandSystemMemoryX64 включен.
+ По умолчанию: false

**ReservedMemorySizeMb** - этот параметр устанавливает размер буфера для обмена геометрией моделей и текстурами между VRAM и RAM. Этот буфер будет определён во VRAM и не будет участвовать в динамичном выделении памяти, однако он также будет дублирован в RAM и использован процессом "TESV.exe". Это значит, что увеличение этого параметра приведёт к увеличению расходов VRAM и RAM. Его значение указывается в Мб, для видеокарт с памятью 1 Гб и больше начальное значение составляет 128 (для некоторых 64). Если вы наблюдаете "заикания", можете увеличить его на число, кратное 128 (256, 384, 512 и т.д.) до тех пор, пока "заикания" не пропадут (но число должно быть минимальным возможным). Максимальное значение этого параметра - 1024; всегда помните: это объём VRAM, который является лишь буфером. Т.к. этот параметр зависит от системы, пользователи должны сами тестировать различные значения, которые лучше всего подойдут для их ПК.
+ По умолчанию: 64

**VideoMemorySizeMb** - этот параметр устанавливает общий объём памяти, который будет участвовать в динамичном выделении памяти. Сначала будет использован весь VRAM за вычетом ReservedMemorySizeMb. Затем, если значение VideoMemorySizeMb выше VRAM пользователя, будет использован RAM - при помощи запуска "enbhost.exe".

Коротко о том, как узнать своё число:
1) Скачайте инструмент [VRamSizeTest](http://enbdev.com/download_vramsizetest.htm),
2) Запустите "VRamSizeDX9.exe" и получите число (после слов "Video memory available"),

    > Если это число подозрительно низкое (около 2000), убедитесь, что вы запускаете инструмент, используя дискретную видеокарту (NVIDIA и пр.), а не интегрированную (например, Intel),

    + Если вы пользователь Win7, вычтите из этого числа 170 и запомните получившееся,
    + Если вы пользователь Win8 или новее, запомните это число как есть,
3) Готово, ваш VideoMemorySizeMb - число из пункта 3.

    > Для пользователей Win8 Microsoft установили лимит видеопамяти, который выделяется приложениям, использующим DX9. Этот лимит - 4 Гб (4096 Мб), так что если вы видите в VRamSizeTest близкое число (обычно 4064, т.к. 32 Мб идут на другие нужды), знайте - это не ошибка. В Win10 эта проблема также существовала, но была исправлена в обновлении "Windows 10 Fall Creators Update".
+ По умолчанию: 2000

**EnableCompression** - включает/отключает сжатие памяти. Отключение этой функции может уменьшить "заикание" за счёт увеличения расхода RAM. По этой причине рекомендуется оставить этот параметр выключенным, если у вас больше 2 Гб RAM. Если ваша система использует объём VRAM, близкий к лимиту, включите этот параметр, иначе вы рискуете получить вреда больше чем пользы.
+ По умолчанию: false

**AutodetectVideoMemorySize** - этот параметр указывает, будет ли общий объём памяти определяться автоматически. Если установлен на true, то VideoMemorySizeMb будет установлен системой, а ваше значение этого параметра будет просто игнорироваться. Эта функция работает для некоторых пользователей, но для остальных даёт неверные значения, которые обычно слишком высоки. Вы можете попробовать включить этот параметр, но всё равно лучшим методом считается ручная установка значения VideoMemorySizeMb.
+ По умолчанию: false

------

## Секция [THREADS]

> Параметры, отвечающие за многопоточность ENBSeries.

**DataSyncMode** - рекомендуемое значение 0 (выключено). Максимальное допустимое - 2.
+ По умолчанию: 0

**PriorityMode** - рекомендуемое значение 0 (выключено). Максимальное допустимое - 4.
+ По умолчанию: 0

    > В 99% случаев эти параметры лучше установить на 0, а активировать их только тогда, когда у вас не грузится сохранение (из-за слишком "тяжёлого" места) или действия в игре приводят к сбоям (к примеру, с некоторыми диалогами новых спутников). Для этих случаев Борис Воронцов пишет, что самыми стабильными являются DataSyncMode=2 и PriorityMode=3.

------

## Секция [MULTIHEAD]

> Параметры этой секции могут оказаться полезны при использовании нескольких графических процессоров. Обычно они не должны изменяться, и значения по умолчанию работают для большинства систем.

**ForceVideoAdapterIndex** - если включен, ENBSeries будет игнорировать выход видеоадаптера по умолчанию и использовать карту с порядковым номером, указанным в VideoAdapterIndex. Это позволяет использовать несколько мониторов и другие возможности систем с несколькими графическими процессорами.
+ По умолчанию: false

**VideoAdapterIndex** - этот параметр устанавливает порядковый номер видеоадаптера, который будет использоваться для рендеринга. Если ForceVideoAdapterIndex установлен на false, это значение игнорируется. Допустимые значения - целочисленные Integer.
+ По умолчанию: 0

------

## Секция [WINDOW]

> Эта секция используется для включения оконного режима игры - Borderless Window (BW). Активация BW может также разрешить использование Alt+Tab для запуска игры в фоновом режиме. Но если включен параметр EnableUnsafeMemoryHacks в секции [MEMORY], Alt+Tab не будет работать, несмотря на настройки данной секции.

**ForceBorderless** - включает/отключает BW. Этот параметр заставляет игру запускаться в оконном режиме, а не в полноэкранном как обычно. Однако, окно будет занимать весь экран и визуально разницы не будет. При значении true также будет работать Alt+Tab, причём без каких-либо проблем. Кроме того, некоторые пользователи сообщали о повышении стабильности игры при включенном этом параметре.
+ По умолчанию: false

**ForceBorderlessFullscreen** - включение этого параметра уберёт линии на границе окна игры в BW. Если вы используете меньшие разрешения, этот параметр рекомендуется установить на true.
+ По умолчанию: false

------

## Секция [ENGINE]

> Параметры этой секции влияют на поведение движка игры.

**ForceAnisotropicFiltering** - этот параметр включит анизотропную фильтрацию для всех доступных текстур - с линейным типом фильтрации. Текстуры, которые не должны подвергаться фильтрации, ей не подвергаются.
+ По умолчанию: true

**MaxAnisotropy** - устанавливает степень анизотропной фильтрации. Значение должно быть кратно 2, максимальное возможное - 16. Чем оно выше, тем выше качество фильтрации.
+ По умолчанию: 16

**ForceLodBias** - этот параметр включает/отключает размытие текстур LOD'ов.
+ По умолчанию: false

**LodBias** - устанавливает степень размытия текстур LOD'ов. Возможные значения от -4 до 4, но должен находиться между -0.5 и 0.5, иначе возможно ухудшение качества текстур. Чем ниже значение, тем текстуры более чёткие.
+ По умолчанию: 0.0

**AddDisplaySuperSamplingResolutions** - этот параметр включает суперсемплинг без использования графического драйвера. Рекомендуется оставить его выключенным, использовать его могут только продвинутые пользователи. Если говорить проще, то рендер происходит для разрешения в 2 раза больше требуемого, а затем картинка "сжимается" до правильного размера и выводится на экран. Чтобы использовать эту функцию, необходимо следующее:
1) установить AddDisplaySuperSamplingResolutions=true,
2) установить UseDefferedRendering=false (секция [GLOBAL]),
3) в файле "SkyrimPrefs.ini" указать разрешение в 2 раза больше реального,
4) запустить игру в полноэкранном режиме.
+ По умолчанию: false

**EnableVSync** - этот параметр включает вертикальную синхронизацию для предотвращения разрывов изображения. Также это может исправить проблему с рассинхронизацией губ NPC. Для корректной работы требуется установить iPresentInterval=1 в файле "Skyrim.ini".
+ По умолчанию: false

**VSyncSkipNumFrames** - этот параметр указывает кадровому буферу порядковый номер кадра, который выведется на экран. Если 0 - выводиться будут все кадры, 1 - каждый второй, 2 - каждый третий и т.д. Например, если ваш реальный FPS равен 60, то при VSyncSkipNumFrames=1 он будет равен 30. Эта функция предназначена для пользователей с частотой обновления экрана выше 60 Гц, для всех остальных должно быть установлено значение 0.
+ По умолчанию: 0

------

## Секция [LIMITER]

> Данная секция отвечает за ограничение FPS до определённого целого числа. Это полезно, т.к. позволяет справиться с проблемами производительности, лагами, крашами, фризами, "заиканиями" и багами физики, которые наблюдаются при высоком FPS. Ограничитель может быть включен/выключен в игре комбинацией Shift+Home (по умолчанию). Активация ограничителя на старых версиях ENBSeries может также увеличить время загрузки, однако, с версии 0.265 эта функция распространяется и на окно загрузки, что решает эту проблему.

> Это ограничение FPS не требуется и в целом не рекомендуется, если включена вертикальная синхронизация в секции [ENGINE], т.к. по существу она тоже ограничивает FPS до частоты обновления монитора.

> Также замечено, что включение этого ограничителя в редких случаях либо вызывает огромное падение FPS - до 5-15 (независимо от параметров секции), либо вообще не работает. В этих случах рекомендуется ограничить FPS, используя настройки видеокарты, т.к. это может быть более стабильно.

**WaitBusyRenderer** - если включено, каждый кадр будет ждать, пока графический процессор обработает его полностью. Это не рекомендуется по причине производительности, однако, в отдельных случаях может помочь с проблемами, указанными выше.
+ По умолчанию: false

**EnableFPSLimit** - включает/отключает ограничитель FPS.
+ По умолчанию: false

**FPSLimit** - этот параметр указывает верхний предел FPS в виде целого числа. Если ограничитель не используется, то это значение игнорируется, в противном случае рекомендуется установить его на частоту обновления вашего монитора (обычно 60).
+ По умолчанию: 10.0

------

## Секция [INPUT]

> Здесь можно настроить горячие клавиши для переключения некоторых параметров ENBSeries. Узнать код конкретной клавиши можно [здесь](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000520.html) (столбец "Key code"). Для отключения клавиши установите её значение на 0.

**KeyReadConfig** - возвращает файлы настроек пресета к последнему сохранённому состоянию без перезагрузки игры. Очень полезно при изменении пресета.
+ По умолчанию: 8 или [Backspace]

**KeyCombination** - клавиша, требуемая для некоторых функций, аналог верхнего регистра.
+ По умолчанию: 16 или [Shift]

**KeyUseEffect** - включает/отключает визуальные эффекты ENB, должна нажиматься вместе с KeyCombination.
+ По умолчанию: 123 или [F12]

**KeyFPSLimit** - включает/отключает ограничитель FPS, должна нажиматься вместе с KeyCombination.
+ По умолчанию: 36 или [Home]

**KeyShowFPS** - включает/отключает отображение счётчика FPS в левом верхнем углу.
+ По умолчанию: 106 или [NumPad *]

**KeyScreenshot** - создаёт скриншот в формате BMP и/или PNG в той же папке, где установлен ENBSeries.
+ По умолчанию: 44 или [Print Screen]

**KeyEditor** - открывает/закрывает окно редактирования параметров ENB, должна нажиматься вместе с KeyCombination.
+ По умолчанию: 13 или [Enter]

**KeyFreeVRAM** - очищает используемую VRAM для предотвращения достижения лимита VRAM и краша.
+ По умолчанию: 115 или [F4]

**KeyBruteForce** - включает/отключает брутфорс-пресет от Бориса Воронцова. Играть с ним невозможно по причине производительности, поэтому он годится только для скриншотов. Клавиша должна нажиматься вместе с KeyCombination.
+ По умолчанию: 66 или [B]

**KeyDepthOfField** - включает/отключает DoF, добавленный ENBSeries. Должна нажиматься вместе с KeyCombination. Этого параметра нет в файле "enblocal.ini" изначально, но он появляется после первого запуска игры с ENBSeries.
+ По умолчанию: 118 или [F7]

------

## Секция [ADAPTIVEQUALITY]

> Эта секция позволяет настроить автоматическое отключение визуальных эффектов для повышения производительности. Для этого требуется, чтобы в .fx файлах был соответствующий код. Возможно, лучше всего его добавлять в "enbeffectprepass.fx", т.к. он содержит самые требовательные эффекты.

**Enable** - включает/отключает Adaptive Quality.
+ По умолчанию: false

**Quality** - устанавливает качество эффекта. 0 - лучшее качество, 1 - средние настройки, 2 - лучшая производительность.
+ По умолчанию: 1

**DesiredFPS** - устанавливает минимальный допустимый FPS. При достижении этого предела эффекты начнут отключаться, чтобы FPS возрос.
+ По умолчанию: 20.0

------

## Секция [ANTIALIASING]

> В этой секции можно настроить 3 параметра сглаживания (AA), реализованных в ENB. Все 3 варианта можно использовать вместе, т.к. Борис Воронцов приложил довольно много усилий, чтобы сбалансировать их. Однако, TemporalAA и EdgeAA вместе могут дать некоторую размытость вокруг веток деревьев.

**EnableEdgeAA** - EdgeAA отлично подходит для слабых систем, т.к. очень слабо влияет на производительность. Но есть недостаток - оно немного размывает картинку. Пользователи более мощных систем могут обратить своё внимание на SMAA, а также использовать EdgeAA и SMAA вместе для достижения лучших результатов, тем более что это не очень сильно влияет на производительность.
+ По умолчанию: false

**EnableTemporalAA** - входит в состав ENBSeries с версии 0.213. Отличное решение для скриншотов и удаления "лесенок", но не всегда подходит для постоянного использования, т.к. может вызвать смазанность быстро движущихся объектов при FPS меньше 40.
+ По умолчанию: false

**EnableSubPixelAA** - включает/отключает SubPixelAA на зеркальных отражениях, минимально снижает производительность. Рекомендуется включить этот параметр.
+ По умолчанию: false

------

**Секция [FIX]**
> Здесь находятся фиксы некоторых проблем ENB или других аспектов игры/железа. Обычно эти параметры не должны изменяться.

**FixGameBugs** - позволяет ENB пофиксить баги, связанные с рендерингом, и ошибки (например, деления на 0), приводящие к крашам. Можете оставить этот параметр активным, если при его выключении начинаются проблемы.
+ По умолчанию: true

**FixParallaxBugs** - исправляет рендеринг текстур с параллаксом путём изменения шейдера, который для них используется. Если вы используете любые текстуры с параллаксом, оставьте значение true, если нет - установите false.
+ По умолчанию: true

**FixParallaxTerrain** - добавляет параллакс ландшафта в игре. Чтобы этот параметр работал, необходимо установить FixParallaxBugs на true.
+ По умолчанию: false

**FixAliasedTextures** - помогает уменьшить алиасинг снега на скалах и других похожих объектах. Если вы не используете SMAA, рекомендуется оставить этот параметр включенным.
+ По умолчанию: true

**IgnoreLoadingScreen** - если эта строка отсутствует, её следует добавить. Этот параметр указывает ENB игнорировать рендеринг во время загрузки, что уменьшает время загрузки и предотвращает некоторые проблемы во время неё (например, пропадающие текстуры).
+ По умолчанию: отсутствует

**IgnoreInventory** - то же самое, что и предыдущий параметр, но относится к меню инвентаря. Рекомендуется оставить значение true.
+ По умолчанию: true

**FixTintGamma** - фикс для небольших цветовых отличий на различных частях моделей (например, волос). Если этот параметр включен, а ColorPow больше 1.0, различия более заметны.
+ По умолчанию: true

**RemoveBlur** - этот параметр убирает статичный DoF игры, который используется для размытия текстур далёкого ландшафта во время некоторых погод (чтобы скрыть недостатки LOD'ов). Вы можете включить этот параметр, если используете DoF ENB-пресета, а можете и оставить, использование двух DoF'ов просто даст более фокусированное размытие.
+ По умолчанию: false

**FixSubSurfaceScattering** - когда включен, исправляет проблемы с подповерхностным рассеиванием для интерьеров и экстерьеров, а также предотвращает пиксельные грани на персонажах и объектах. Рекомендуется оставить включенным.
+ По умолчанию: true

**FixSkyReflection** - исправляет проблему с дрожащим отражением неба при некоторых погодах. Рекомендуется оставить включенным.
+ По умолчанию: true

**FixCursorVisibility** - исправляет проблему с видимостью курсора после использования Alt+Tab. Является заменой "Double Cursor Fix", рекомендуется оставить его включенным.
+ По умолчанию: true

**FixLag** - этот параметр уменьшит задержки, которые в основном наблюдаются в оконном режиме. Эти задержки - фактически пропущенные кадры - возникают при высокой нагрузке на видеокарту. Этот параметр - экспериментальный хак, который был сделан специально для владельцев видеокарт NVIDIA, однако, может работать и для остальных. Тестов этого параметра было проведено не так много.
+ По умолчанию: false

------

## Секция [LONGEXPOSURE]

> В этой секции вы можете настроить эффект длинной выдержки. Возможный результат можно посмотреть [здесь](https://www.youtube.com/watch?v=OTrtDEjYKWU).

**EnableLongExposureMode** - включение/отключение эффекта длинной выдержки.
+ По умолчанию: false

**Time** - время выдержки в секундах.
+ По умолчанию: 1.0

**BlendMax** - сила смешения.
+ По умолчанию: 0.0
